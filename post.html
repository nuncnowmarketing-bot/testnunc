<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>nunc — Make a post</title>
  <style>
    :root{
      --bg:#121212;
      --panel:#161616;
      --panel2:#1b1b1b;
      --text:#ffffff;
      --muted:rgba(255,255,255,0.70);
      --hair:rgba(255,255,255,0.12);
      --pill:rgba(255,255,255,0.06);
      --pillHover:rgba(255,255,255,0.10);
      --danger:#ff4d4d;
      --ok:#7CFCB2;
      --gold:#d4af37;
      --goldBg:rgba(212,175,55,0.15);
      --goldHover:rgba(212,175,55,0.25);
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:Garamond,"EB Garamond","Cormorant Garamond","Times New Roman",serif;
      letter-spacing:0.2px;
    }

    a{color:inherit; text-decoration:none}

    .wrap{min-height:100%;display:flex;flex-direction:column}

    header{position:sticky;top:0;background:rgba(18,18,18,0.94);border-bottom:1px solid var(--hair);z-index:10}
    .nav{max-width:1080px;margin:0 auto;padding:18px 20px;display:flex;align-items:center;justify-content:space-between}
    .logo{font-size:30px;font-weight:600;line-height:1}
    .nav-actions{display:flex;gap:10px}
    .pill{padding:8px 14px;border:1px solid var(--hair);border-radius:999px;background:var(--pill);font-size:14px;font-family:inherit;text-transform:lowercase}
    .pill:hover{background:var(--pillHover)}

    main{flex:1;max-width:980px;margin:0 auto;padding:18px 16px 48px;display:flex;justify-content:center;align-items:flex-start;}

    .card{margin-top:8vh;border:1px solid var(--hair);background:linear-gradient(180deg,var(--panel),var(--panel2));border-radius:18px;padding:18px 18px 14px;box-shadow:0 12px 30px rgba(0,0,0,0.35);width:min(720px, 100%);}

    h1{margin:0 0 10px;font-size:24px}
    .sub{margin:0 0 16px;color:var(--muted);font-size:15px}
    .field{display:flex;flex-direction:column;gap:8px;margin-bottom:14px}
    label{font-size:15px;color:var(--muted)}

    textarea{width:100%;min-height:96px;resize:none;padding:12px;border-radius:14px;border:1px solid var(--hair);background:rgba(255,255,255,0.03);color:var(--text);font:inherit;font-size:17px;line-height:1.3;}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:14px;flex-wrap:wrap}
    .chip{border:1px solid var(--hair);background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:999px}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border:1px solid var(--hair);background:var(--pill);border-radius:999px;cursor:pointer;font:inherit}
    .btn.gold{border-color:var(--gold);background:var(--goldBg);color:var(--gold);font-weight:700}

    .help{margin-top:10px;padding-top:10px;border-top:1px solid var(--hair);color:var(--muted);font-size:14px;}
    .toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:rgba(0,0,0,0.82);border:1px solid var(--hair);padding:10px 12px;border-radius:12px;display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="nav">
        <a class="logo" href="leaderboard.html">nunc</a>
        <div class="nav-actions">
          <a class="pill" href="leaderboard.html">leaderboard</a>
          <a class="pill" href="map.html">map</a>
          <a class="pill" href="post.html">post</a>
          <a class="pill" href="login.html">log in</a>
        </div>
      </div>
    </header>

    <main>
      <div class="card">
        <h1>Make a post</h1>
        <p class="sub">No links. No media. Just text.</p>

        <div class="field">
          <label for="postText">Post</label>
          <textarea id="postText" maxlength="200" placeholder="Write something worth boosting."></textarea>
        </div>

        <div class="row">
          <div class="meta">
            <span class="chip" id="charCount">0/200</span>
            <span class="chip" id="ttl">Expires in: —</span>
            <span class="chip" id="country">Location: —</span>
          </div>
          <button class="btn gold" id="submitBtn">Post</button>
        </div>

        <div class="help">Rules enforced: text-only (no URLs), max 200 characters, post expires after 24 hours.</div>
      </div>
    </main>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    (function(){
      const KEY='nunc_posts_v1',MAX=200,ONE_DAY_MS=86400000;
      const countries=['Ireland','France','Germany','USA','Japan','Brazil','Canada','South Africa'];
      const elText=postText,elCount=charCount,elTTL=ttl,elCountry=country,elToast=toast,elSubmit=submitBtn;
      const pageCountry=countries[Math.floor(Math.random()*countries.length)];
      elCountry.textContent='Location: '+pageCountry;
      const now=()=>Date.now();
      const toastMsg=m=>{elToast.textContent=m;elToast.style.display='block';setTimeout(()=>elToast.style.display='none',1800)};
      const hasUrl=s=>/(https?:\/\/|www\.|\.[a-z]{2,})/i.test(s);
      const prune=p=>p.filter(x=>now()-x.createdAt<ONE_DAY_MS);
      const load=()=>JSON.parse(localStorage.getItem(KEY)||'[]');
      const save=p=>localStorage.setItem(KEY,JSON.stringify(p));
      const update=()=>elCount.textContent=elText.value.length+'/'+MAX;
      const submit=()=>{
        const t=elText.value.trim();
        if(!t)return toastMsg('Empty post blocked.');
        if(hasUrl(t))return toastMsg('Links are blocked.');
        const p={id:Math.random().toString(36),text:t,country:pageCountry,createdAt:now(),expiresAt:now()+ONE_DAY_MS,boosts:0};
        const posts=prune(load());posts.unshift(p);save(posts);
        toastMsg('Posted.');setTimeout(()=>location.href='leaderboard.html',450);
      };
      update();elText.oninput=update;elSubmit.onclick=submit;
    })();
  </script>
</body>
</html>
